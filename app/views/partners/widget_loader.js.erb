if ((parent == window) && (/WebKit\/[4-7]|MSIE [6-9]|Gecko\/200(51[12]|[6-9])|Opera\/9/.test(navigator.userAgent))) {
  (function () {
    var rtvCss = document.createElement('link');
    rtvCss.href = '<%= @host %>/submodal/subModal.css';
    rtvCss.rel = "stylesheet";
    rtvCss.type = "text/css";
    var rtvJs = document.createElement('script');
    rtvJs.src = '<%= @host %>/submodal/subModal.js';
    rtvJs.type = "text/javascript";

    // TODO: is setTimeout the way to go?
    setTimeout(function () {
      document.body.appendChild(rtvCss);
      document.body.appendChild(rtvJs);
    },0);

    var rtvShowOverlay = function (e) {
      RTVModal.initPopUp('<%= @host %>');
      RTVModal.showPopWin('<%= new_registrant_path(:partner => @partner_id) %>', 600, 500, null);
      e = e || event
      e.preventDefault ? e.preventDefault() : e.returnValue = false;
    }

    var rtvWidgetLink = document.getElementById('rtv-widget-link');
    if (rtvWidgetLink.addEventListener){
      rtvWidgetLink.addEventListener('click', rtvShowOverlay, false);
    } else if (rtvWidgetLink.attachEvent){
      rtvWidgetLink.attachEvent("onclick", rtvShowOverlay);
    }
  })();
}
